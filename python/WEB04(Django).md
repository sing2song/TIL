# WEB server

ì¸í„°ë„·ì„ í†µí•´ì„œ clientì˜ requestê°€ ì „ë‹¬ë˜ì—ˆì„ ë•Œ ì´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” hardware & software => ì •ì  resource ì„œë¹„ìŠ¤



## WSGI

**Web Server Gate Interface**

pythonì— ì¢…ì†ëœ ê°œë…



ì•ì—ë‹¨ ì•„íŒŒì¹˜ë¥¼ ì“°ëŠ”ë° í˜„ì¬ ì“°ì§€ ì•ŠëŠ”ë‹¤! ì“¸ë ¤ë©´ ì—°ë™í•œê²ƒì„ ì´ì–´ì¤˜ì•¼í•¨. ê·¸ ë•Œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼. **ì™¸ë¶€ ì›¹ì„œë²„ì™€ ì—°ë™í•˜ê¸° ìœ„í•œ íŒŒì¼ì´ wsgiíŒŒì¼!**

ìš°ë¦¬ëŠ” ì‰½ê²Œ ê°€ê¸° ìœ„í•´ ì¤‘ê°„ ì•„íŒŒì¹˜ ì„œë²„ë‹¨ê³„ë¥¼ ë„˜ê¸°ê³  WASì•ˆì— ìˆëŠ” ë¯¸ë“¤ì›¨ì–´ë¡œ ë°”ë¡œ ê°ˆê²ƒì´ë‹¤!





# Django

## íŠ¹ì§•

![image-20210127130653026](md-images/image-20210127130653026.png)

- ì „ì²´ í”„ë¡œê·¸ë¨ì„ í”„ë¡œì íŠ¸ë¼ê³  í‘œí˜„!

- ëª¨ë“ˆí™”ëœ ë‹¨ìœ„ í”„ë¡œê·¸ë¨ = í•˜ë‚˜ì˜ ê¸°ëŠ¥ì„ ê°–ê³ ìˆëŠ” ëª¨ë“ˆ.

  ex. íšŒì›ê´€ë¦¬, íšŒì›ë“±ë¡, íšŒì›ì ìœ¼ë¡œ ê´€ë ¨ëœ ê²ƒ, ìš°ë¦¬ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ë„ì„œì— ê´€ë ¨ëœ ê²ƒ, 

- ê°œê°œì¸ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ë“¤ì´ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒ. (ë‹¤ë¥¸ ê³³ì—ì„œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ëª¨ë“ˆë¡œ ë³´ê¸°ë„í•˜ê¸° ë•Œë¬¸ì— ìš©ì–´ í˜¼ë™ì¡°ì‹¬!!)

- í”„ë¡œì íŠ¸ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ë“¤ì˜ ëª¨ìŒ





## ì„¤ì¹˜

1. anaconda promptì—ë‹¤ê°€ ì„¤ì¹˜í•œë‹¤

   baseìƒíƒœì—ì„œ ì„¤ì¹˜í•˜ì!

```bash
conda install django	#ì„¤ì¹˜
```

â€‹	1-1. djangoì„¤ì¹˜í™•ì¸

```bash
python -m django --version
# 2.2.5 ë¡œ ë‚˜ì˜¨ë‹¤
```




2. python-Djangoí´ë”ë¥¼ ìƒì„±í•´ì„œ ì¥ê³ ì™€ ê´€ë ¨ëœ íŒŒì¼ì€ ì´ í´ë”ì— ì„œ ì§„í–‰í•˜ì!

```bash
(base) C:\Users\32153256>cd ..

(base) C:\Users>cd ..

(base) C:\>mkdir python-Django

(base) C:\>cd python-Django

(base) C:\python-Django>  
```



3. django-adminì´ë¼ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í”„ë¡œì íŠ¸ ë¼ˆëŒ€ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ê²ƒ! ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê² ë‹¤ëŠ” ê²ƒ!

   startproject ë’¤ì—ëŠ” í”„ë¡œì íŠ¸ì˜ ì´ë¦„ì„ ì§€ì •í•´ì„œ ë„£ì–´ì¤€ë‹¤

```bash
(base) C:\python-Django>django-admin startproject mysite
```

â€‹	3-1. íƒìƒ‰ê¸°ë¥¼ ì—´ì–´ì„œ í˜„ì¬ ìƒíƒœë¥¼ íŒŒì•…í•´ë³´ì!

â€‹	í˜„ì¬ ì§„í–‰í•˜ë ¤ëŠ” í”„ë¡œì íŠ¸ì˜ ìµœìƒìœ„ í´ë”ê°€ ìƒì„±ë˜ì—ˆë‹¤!

â€‹	ë‚´ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª©ì ì˜ ê´€ë¦¬ í”„ë¡œì íŠ¸ì´ê¸° ë•Œë¬¸ì— ì´ë¦„ì„ ê¼­ mysiteë¡œ ì§„í–‰í•˜ì§€ ì•Šì•„ë„ ëœë‹¤! **MyFirstWeb**ìœ¼ë¡œ ë°”ê¿”ì„œ ì§„í–‰í•˜ì!=>ì•ˆì— mysiteí´ë”ê°€ ë˜ ìˆê¸° ë•Œë¬¸ì— í—·ê°ˆë¦¼ì„ ë°©ì§€í•˜ê³ ì!  

â€‹	ë‚´ë¶€ì˜ mysiteí´ë” : ë‚´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„¤ì •ë“¤ì˜ ëª¨ìŒ.(ì´ë¦„ë³€ê²½X)

![image-20210127140929022](md-images/image-20210127140929022.png)

![image-20210127141205038](md-images/image-20210127141205038.png)



4. **anaconda promptì—ì„œ ìœ„ì—ì„œ ë§Œë“  í´ë”ë¡œ ì´ë™í•œ ë‹¤ìŒì— startappìœ¼ë¡œ pollsë¼ëŠ” ì´ë¦„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ í”„ë¡œì íŠ¸ë‚´ì— manage.pyë¥¼ ì´ìš©í•´ì„œ ë§Œë“ ë‹¤ë¼ëŠ” ì˜ë¯¸**

```bash
(base) C:\python-Django\MyFirstWeb>python manage.py startapp polls
```

![image-20210127141942969](md-images/image-20210127141942969.png)



### â˜íŒŒì¼êµ¬ì¡° í™•ì¸

í˜„ì¬ê¹Œì§€ ì§„í–‰í•œ projectì˜ í´ë” êµ¬ì¡°

![image-20210127144427718](md-images/image-20210127144427718.png)

>ì„¤ëª…

- MyFirstWeb(project)

  â€‹	db.sqlite3(database íŒŒì¼) - **ì•„ì§ ìƒì„±ì•ˆí•¨!**

  â€‹	manage.py

  â€‹	mysite(í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì„¤ì •ì„ ê°–ê³ ìˆëŠ” í´ë”) 

  â€‹	polls(application)

  

- mysiteí´ë”

  `__init__.py` : 3ë²„ì „ì™€ì„  ê±°ì˜ ì‚¬ìš©X, ì˜ë¯¸ X

  `settings.py` : í”„ë¡œì íŠ¸ì˜ ì „ì²´ì„¤ì •

  `urls.py` : project levelì˜ url patternì„ ì •ì˜í•˜ëŠ” **URL confíŒŒì¼.** (MVTíŒ¨í„´ì—ì„œ ì‚¬ìš©ë˜ëŠ” URLconfigì™€ ê´€ë ¨)

  ë³´í†µ application ë‚´ì—ë„ urls.pyë¥¼ ë§Œë“¤ì–´ì„œ ê³„ì¸µ êµ¬ì¡°ë¡œ ì´ìš©

  =>

  `wsgi.py` : ì›¹ ì„œë²„ ê²Œì´íŠ¸ì›¨ì´ ì¸í„°í˜ì´ìŠ¤. Apacheì™€ ê°™ì€ ì›¹ì„œë²„ì™€ ì—°ë™í•˜ê¸° ìœ„í•œ ì„¤ì •. (í˜„ì¬, ìš°ë¦¬ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤! ì´ìœ ëŠ” ìœ„ WSGIíŒŒíŠ¸ì—ì„œ ì„œìˆ )

  

- pollsí´ë”

  `admin.py` : Admin site(ê´€ë¦¬ì í˜ì´ì§€)ì— model classë¥¼ ë“±ë¡. ìš°ë¦¬ëŠ” OMRì„ ì“°ë‹ˆê¹Œ ëª¨ë¸ì´ ë°ì´í„°ë² ì´ìŠ¤ë‘ ì—°ë™ëœë‹¤. sql codeê°€ ì•„ë‹ˆë¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì œì–´í•˜ëŠ” ë‚´ìš©ì„ ê´€ë¦¬ì í˜ì´ì§€ì— ì„¤ì • ë° ì²˜ë¦¬ë¥¼ í•œë‹¤.

  ì¥ê³ ëŠ” ìë™ì ìœ¼ë¡œ ê´€ë¦¬ì í˜ì´ì§€ê°€ ë§Œë“¤ì–´ì§€ê²Œ ëœë‹¤.

  ex) ë‚´ê°€ íŒŒì´ì¬ì—ì„œ ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ë©´ databaseì— í…Œì´ë¸”ì´ ë§Œë“¤ì–´ì§„ë‹¤. ì–´ë–¤ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì‚¬ìš©ì´ ë˜ëŠ”ì§€ ê´€ë¦¬ìí˜ì´ì§€ì—ì„œ í™•ì¸ì„ í•´ì•¼í•œë‹¤. 

  `apps.py` : application ì„¤ì •í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼

  `migrations í´ë”` : databaseë³€ê²½ì‚¬í•­ì„ ê´€ë¦¬í•˜ëŠ” í´ë”. DBì— ëŒ€í•œ CRUDê°€ ë°œìƒí•˜ë©´ ê´€ë ¨ëœ íŒŒì¼ë“¤ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤. 

  `models.py` : ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ ì—°ê´€ëœ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ì •ë¦¬í•˜ëŠ” íŒŒì¼. => í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê²Œ ë˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ì´ ë§Œë“¤ì–´ì§€ê²Œ ë˜ëŠ” ê²ƒ.

   `views.py` : Viewí•¨ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼. **ë¡œì§ì²˜ë¦¬**í•˜ëŠ” í•¨ìˆ˜ê°€ View.






### íŒŒì´ì°¸ ì„¤ì¹˜

1. professional ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜!

![image-20210127150712683](md-images/image-20210127150712683.png)

ì´ëŒ€ë¡œ install~ ë°”íƒ•í™”ë©´ì— ì„¤ì¹˜ ëœ ê²ƒì„ ì‚¬ìš©!

ë‚œ í˜„ì¬ í•™ìƒìš©ìœ¼ë¡œ êµ¬ë¹„í•´ë’€ê¸°ë•Œë¬¸ì— ë¬¸ì œ ì—†ìŒ!



2. open í•´ì„œ ìš°ë¦¬ê°€ ë§Œë“  python-Django ì—ì„œ ìœ„ì—ì„œ ë§Œë“  ìµœìƒìœ„ í´ë”ì¸ MyFirstWebí´ë”ë¡œ ë“¤ì–´ê°„ë‹¤

![image-20210127151138794](md-images/image-20210127151138794.png)

![image-20210127151250326](md-images/image-20210127151250326.png)







  ### settings.py

















# MVT pattern(Modelê¸°ëŠ¥ Viewí•¨ìˆ˜ Template )

![image-20210127131331329](md-images/image-20210127131331329.png)

ì›¹ í´ë¼ì´ì–¸íŠ¸ì—ì„œ requestë¥¼ ë³´ë‚´ë©´ ì œì¼ ë¨¼ì € ì„œë²„ì—ì„œ URLConfë¥¼ ê±°ì³ì„œ Viewë¡œ ë“¤ì–´ê°„ë‹¤. ViewëŠ” í•¨ìˆ˜ì˜ ì§‘í•©ìœ¼ë¡œ ë³¼ ìˆ˜ ë„ ìˆê³  classì˜ ë©”ì†Œë“œ.

Viewì—ì„œëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë¡œì§ì„ ê°–ê³  ìˆê³ , Modelí•œí…Œ CRUDë¥¼ ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ORMì„ í†µí•´ì„œ Databaseì™€ ì—°ê²°.

â€‹	ORM : python classë¥¼ ì´ìš©í•´ì„œ Databaseë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ

ë‚˜ì˜¨ ê²°ê³¼ë¡œ Templateì„ í†µí•´ Viewë¥¼ ê±°ì³ responseë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤.



# ğŸš©í”„ë¡œì íŠ¸!!

ì±…ì— ìˆëŠ” ë‚´ìš©ì„ ì°¨ìš©í•´ì„œ ì“¸ ì˜ˆì •(í´ í”„ë¡œì íŠ¸?) 

ì‹¤ìˆ˜ë‚˜ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ.... ìš°ë¦¬ê°€ ë°›ì€ ì±…ì— ìˆì„ ê±°ë‹¹!!

## ì„¤ê³„

> Poll project(ì„¤ë¬¸ì¡°ì‚¬ ì›¹ í”„ë¡œê·¸ë¨)

ex)![image-20210127132447411](md-images/image-20210127132447411.png)



> Database Table ì„¤ê³„



í…Œì´ë¸”ì€ ëª‡ê°œ í•„ìš”í• ê¹Œ? 

DataFrameì²˜ëŸ¼ 2ì°¨ì› ë°°ì—´ì„ ìƒê°í•´ë´…ì‹œë‹¤!

1. Question table

   column 3ê°œ(id, question-text,pub-date)

- id : ìˆ«ì, ìë™ìƒì„±(ì‹œí€€ìŠ¤), primary key, not null

- question-text: ë¬¸ìì—´, not null

- pub-date: ë‚ ì§œ, ì–¸ì œ ì„¤ë¬¸ì„ ë§Œë“¤ì—ˆëŠ”ê°€



2. choice table

ê° ì§ˆë¬¸ë‹¹ ë³´ê¸°ê°€ ìˆì–´ì•¼í•œë‹¤! detail.html

column 4ê°œ(id, choice-text, votes, question_id)

- id : indexë¡œ ìƒê°
- choice-text : ë¬¸ìì—´, í•­ëª©ë“¤ì´ ì €ì¥ë¨
- votes: ìˆ«ì, ê° í•­ëª©ë“¤ì´ ëª‡ë²ˆ ì„ íƒëëŠ”ì§€. íˆ¬í‘œíšŸìˆ˜.
- question_id : ê° í•­ëª©ì€ ì–´ë–¤ ì§ˆë¬¸ì— ëŒ€í•œ í•­ëª©ì¸ê°€. **Question tableì˜ idì™€ ê°™ë‹¤** ì™¸ë˜í‚¤.(Foreign key)



## ì‹¤í–‰





